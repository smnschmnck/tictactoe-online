(this["webpackJsonptictactoe-web"]=this["webpackJsonptictactoe-web"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),a=n(9),c=n.n(a),s=(n(15),n(2)),r=(n(16),n(10)),l=n.n(r),j=n(0),d=new WebSocket(window.location.origin.replace(/^http/,"ws"));d.onopen=function(){if(localStorage.getItem("room")){var e=localStorage.getItem("room");localStorage.removeItem("room"),d.send(JSON.stringify({status:"requestToJoin",room:e}))}};var u=function(e){var t=e.roomID,n=Object(i.useState)("Copy Invite"),o=Object(s.a)(n,2),a=o[0],c=o[1],r=Object(i.useState)(!1),d=Object(s.a)(r,2),u=d[0],b=d[1],m=Object(i.useState)(!1),O=Object(s.a)(m,2),h=O[0],f=O[1],v=window.location.href+"room/"+t;return Object(j.jsxs)("div",{className:"WaitingRoom",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"Waiting",children:"Waiting for player 2"}),Object(j.jsxs)("p",{className:"ShowRoomID",children:[Object(j.jsx)("b",{children:"Room ID: "}),t]})]}),Object(j.jsxs)("div",{className:"ShareDiv",children:[Object(j.jsx)("button",{className:u?"CopiedButton":"CopyButton",onClick:function(){return navigator.clipboard.writeText(v),c("Copied!"),void b(!0)},children:a}),Object(j.jsx)("div",{className:"QRDiv",children:h?Object(j.jsx)(l.a,{className:"QR",value:v,size:150}):Object(j.jsx)("button",{className:"QRButton",onClick:function(){return f(!0)},children:"Show QR Code Invite"})})]})]})},b=function(){var e=Object(i.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(j.jsxs)("div",{className:"JoinRoom",children:[Object(j.jsxs)("form",{className:"RoomForm",onSubmit:function(e){return e.preventDefault()},children:[Object(j.jsx)("h1",{children:"Join Room"}),Object(j.jsx)("input",{className:"RoomInput",placeholder:"Room ID",onChange:function(e){return o(e.target.value)},autoFocus:!0}),Object(j.jsx)("button",{className:"JoinRoomButton",onClick:function(){d.send(JSON.stringify({status:"requestToJoin",room:n}))},children:"Join"})]}),Object(j.jsx)("h1",{children:"or"}),Object(j.jsxs)("div",{className:"CreateRoom",children:[Object(j.jsx)("h1",{children:"Create Room"}),Object(j.jsx)("button",{className:"JoinRoomButton",onClick:function(){d.send(JSON.stringify({status:"idRequest"}))},children:"Create Room"})]})]})},m=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(i.useState)(""),c=Object(s.a)(a,2),r=c[0],l=c[1],m=Object(i.useState)(!1),O=Object(s.a)(m,2),h=O[0],f=O[1],v=Object(i.useState)(""),x=Object(s.a)(v,2),g=x[0],N=x[1],p=Object(i.useState)(!1),w=Object(s.a)(p,2),S=w[0],R=w[1];document.title=r?"TicTacToe - Room: "+r:"TicTacToe";var C=function(){for(var e=[],t=0;t<3;t++){for(var n=[],i=0;i<3;i++)n.push({fieldVal:"",claimed:!1,winningField:!1});e.push(n)}return e},J=Object(i.useState)(C()),k=Object(s.a)(J,2),y=k[0],I=k[1];d.onmessage=function(e){var t=e.data,n=JSON.parse(t);switch(n.status){case"join":o(!0),l(n.room);break;case"board":S&&R(!1),I(n.board),f(!0);var i=n.XO;N(n.turn?"Your turn as "+i:"Wait");break;case"end":if("Tie"!==n.winner){N("Winner: "+n.winner);for(var a=C(),c=0;c<3;c++)for(var s=0;s<3;s++)a[c][s].claimed=!0,a[c][s].fieldVal=y[c][s].fieldVal;for(var r=0;r<n.winningFields.length;r++){var j=n.winningFields[r].i,d=n.winningFields[r].j;a[j][d].winningField=!0}I(a)}else N("Tie!");R(!0);break;case"disconnect":alert("Other player disconnected! Refresh page to start a new game."),window.location.reload();break;case"error":alert(n.errorMessage)}};return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("div",{className:"Main",children:n?Object(j.jsx)("div",{className:"Game",children:h?Object(j.jsxs)("div",{className:"Board",children:[Object(j.jsx)("h1",{className:"Winner",children:g}),y.map((function(e,t){return Object(j.jsx)("div",{className:"Row",children:e.map((function(e,n){return Object(j.jsx)("button",{className:e.winningField?"WinningField":"Field",onClick:function(){return function(e,t){d.send(JSON.stringify({status:"move",room:r,i:e,j:t}))}(t,n)},children:e.fieldVal},t+":"+n)}))},t)})),Object(j.jsx)("button",{className:"NewGameButton",style:{visibility:S?"visible":"hidden"},onClick:function(){d.send(JSON.stringify({status:"newgame",room:r}))},children:"New Game"})]}):Object(j.jsx)(u,{roomID:r})}):Object(j.jsx)(b,{})})})};c.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(m,{})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.ffeb005c.chunk.js.map